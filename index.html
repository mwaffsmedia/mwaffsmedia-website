<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MWAFFS MEDIA - Premier Media Company in Malawi</title>
    <meta name="description" content="MWAFFS MEDIA - Leading Malawian media company specializing in Photography, Videography, and Graphic Design services.">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* All your existing CSS remains the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #e74c3c;
            --secondary-color: #2c3e50;
            --accent-color: #f39c12;
            --text-dark: #2c3e50;
            --text-light: #ecf0f1;
            --bg-light: #f8f9fa;
            --bg-dark: #34495e;
            --malawi-flag-red: #ce1126;
            --malawi-flag-black: #000000;
            --malawi-flag-green: #21b000;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(44, 62, 80, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .header.scrolled {
            background: var(--secondary-color);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-light);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--primary-color);
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-menu a:hover,
        .nav-menu a.active {
            color: var(--primary-color);
        }

        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s ease;
        }

        .nav-menu a:hover::after,
        .nav-menu a.active::after {
            width: 100%;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: var(--text-light);
            transition: 0.3s;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            background: linear-gradient(rgba(44, 62, 80, 0.7), rgba(231, 76, 60, 0.3)),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%232c3e50" width="1200" height="600"/><circle fill="%23e74c3c" cx="300" cy="150" r="50" opacity="0.3"/><circle fill="%23f39c12" cx="900" cy="400" r="80" opacity="0.2"/><rect fill="%2321b000" x="500" y="200" width="200" height="200" opacity="0.1" rx="20"/></svg>');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--text-light);
            position: relative;
        }

        .hero-content h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease;
        }

        .hero-content .tagline {
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            margin-bottom: 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease 0.3s both;
        }

        .hero-content .subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            margin-bottom: 3rem;
            animation: fadeInUp 1s ease 0.6s both;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 1s ease 0.9s both;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        .btn-outline {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-outline:hover {
            background: white;
            color: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* Section Styles */
        .section {
            padding: 80px 0;
            position: relative;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: 1rem;
            position: relative;
            display: inline-block;
        }

        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: var(--primary-color);
        }

        .section-title p {
            font-size: 1.2rem;
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto;
        }

        /* About Section */
        .about {
            background: var(--bg-light);
        }

        .about-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
            margin-top: 3rem;
        }

        .about-content h3 {
            font-size: 1.8rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .about-content p {
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .stat-item {
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-5px);
        }

        .stat-item .number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
        }

        .stat-item .label {
            font-size: 1rem;
            opacity: 0.8;
            margin-top: 0.5rem;
        }

        /* Services Section */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .service-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--primary-color);
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .service-card i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .service-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .service-card p {
            opacity: 0.8;
            line-height: 1.6;
        }

        /* Portfolio Section - NEW: Moved before Team */
        .portfolio-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .portfolio-item {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            background: white;
        }

        .portfolio-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .portfolio-item .item-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            position: relative;
            overflow: hidden;
        }

        .portfolio-item .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .portfolio-item .item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 62, 80, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .portfolio-item:hover .item-overlay {
            opacity: 1;
        }

        .portfolio-item .item-content {
            padding: 1.5rem;
        }

        .portfolio-item h3 {
            margin-bottom: 0.5rem;
        }

        .portfolio-item .category {
            color: var(--primary-color);
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* NEW: Category Slideshow Styles */
        .category-slideshow {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .category-slideshow.active {
            display: flex;
        }

        .slideshow-container {
            position: relative;
            width: 90%;
            max-width: 1000px;
            height: 70vh;
            overflow: hidden;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .slideshow-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slideshow-slide.active {
            opacity: 1;
        }

        .slideshow-slide img,
        .slideshow-slide video {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .slideshow-controls {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .slideshow-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slideshow-nav {
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slideshow-dots {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }

        .slideshow-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .slideshow-dot.active {
            background: var(--primary-color);
        }

        /* Team Section - NEW: Moved after Portfolio */
        .team {
            background: var(--bg-light);
        }

        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .team-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .team-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .team-card .card-image {
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            position: relative;
            overflow: hidden;
        }

        .team-card .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .team-card:hover .card-image img {
            transform: scale(1.1);
        }

        .team-card .card-content {
            padding: 1.5rem;
        }

        .team-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .team-card .position {
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .team-card .bio {
            opacity: 0.8;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Contact Section */
        .contact {
            background: var(--bg-light);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            margin-top: 3rem;
        }

        .contact-form {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: border-color 0.3s ease;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .contact-info h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .contact-item i {
            font-size: 1.2rem;
            color: var(--primary-color);
            width: 20px;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .social-links a {
            width: 50px;
            height: 50px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-links a:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }

        /* Footer */
        .footer {
            background: var(--secondary-color);
            color: var(--text-light);
            padding: 3rem 0 1rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .footer-section a {
            color: var(--text-light);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--primary-color);
        }

        .footer-bottom {
            border-top: 1px solid #495057;
            padding-top: 1rem;
            text-align: center;
        }

        /* Admin Panel */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            z-index: 2000;
            overflow-y: auto;
            transition: right 0.3s ease;
            padding: 2rem;
        }

        .admin-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 2001;
            transition: all 0.3s ease;
            display: none; /* Hidden by default */
        }

        .admin-toggle.visible {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .admin-toggle:hover {
            background: #c0392b;
            transform: scale(1.1);
        }

        .admin-section {
            margin-bottom: 2rem;
            padding: 1rem;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
        }

        .admin-section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 0.5rem;
        }

        /* Admin Login Modal */
        .admin-login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 3000;
            align-items: center;
            justify-content: center;
        }

        .admin-login-modal.active {
            display: flex;
        }

        .login-form {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 400px;
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
        }

        .login-form .form-group {
            margin-bottom: 1.5rem;
        }

        .login-form .btn {
            width: 100%;
            justify-content: center;
        }

        .login-message {
            margin-top: 1rem;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            display: none;
        }

        .login-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .secret-login-trigger {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 10px;
            height: 10px;
            background: transparent;
            border: none;
            cursor: pointer;
            z-index: 2002;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-menu {
                position: fixed;
                top: 80px;
                left: -100%;
                width: 100%;
                height: calc(100vh - 80px);
                background: var(--secondary-color);
                flex-direction: column;
                justify-content: flex-start;
                align-items: center;
                padding-top: 2rem;
                transition: left 0.3s ease;
            }

            .nav-menu.active {
                left: 0;
            }

            .nav-menu li {
                margin: 1rem 0;
            }

            .about-grid,
            .contact-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .admin-panel {
                width: 100vw;
                right: -100vw;
            }

            .slideshow-container {
                height: 50vh;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Loading Animation */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loader.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader-content {
            text-align: center;
            color: white;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid #34495e;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .lightbox {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            align-items: center;
            justify-content: center;
        }

        .lightbox img,
        .lightbox video {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }

        /* Form Message Styles */
        .form-message {
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            display: none;
            font-weight: bold;
        }

        .form-message.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .form-message.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .testimonials-carousel {
            position: relative;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .testimonial-item {
            display: none;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .testimonial-item.active {
            display: block;
            opacity: 1;
        }

        .testimonial-content {
            background: white;
            padding: 3rem 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
        }

        .testimonial-content::before {
            content: '"';
            font-size: 4rem;
            color: var(--primary-color);
            position: absolute;
            top: -10px;
            left: 20px;
            font-family: serif;
        }

        .testimonial-content p {
            font-size: 1.2rem;
            font-style: italic;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .testimonial-author h4 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .testimonial-author span {
            opacity: 0.7;
            font-size: 0.9rem;
        }

        .testimonial-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .testimonial-nav button {
            width: 50px;
            height: 50px;
            border: 2px solid var(--primary-color);
            background: transparent;
            color: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .testimonial-nav button:hover {
            background: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--primary-color);
        }

        .admin-header h2 {
            color: var(--primary-color);
            margin: 0;
        }

        .close-admin {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-admin:hover {
            background: var(--primary-color);
            color: white;
        }

        .admin-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .admin-buttons .btn {
            flex: 1;
            justify-content: center;
        }

        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: border-color 0.3s ease;
            background: white;
        }

        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        @media (max-width: 768px) {
            .testimonial-content {
                padding: 2rem 1rem;
            }

            .testimonial-content p {
                font-size: 1rem;
            }

            .admin-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loader" id="loader">
        <div class="loader-content">
            <div class="spinner"></div>
            <h2>MWAFFS MEDIA</h2>
            <p>Loading Excellence...</p>
        </div>
    </div>

    <!-- NEW: Category Slideshow -->
    <div class="category-slideshow" id="category-slideshow">
        <button class="slideshow-close" id="slideshow-close">
            <i class="fas fa-times"></i>
        </button>
        <div class="slideshow-container" id="slideshow-container">
            <!-- Slides will be dynamically added here -->
        </div>
        <div class="slideshow-controls">
            <button class="slideshow-nav" id="slideshow-prev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="slideshow-nav" id="slideshow-next">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="slideshow-dots" id="slideshow-dots">
            <!-- Dots will be dynamically added here -->
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="admin-login-modal" id="admin-login-modal">
        <div class="login-form">
            <h2>Admin Login</h2>
            <form id="admin-login-form">
                <div class="form-group">
                    <label for="admin-username">Username</label>
                    <input type="text" id="admin-username" name="username" required>
                </div>
                <div class="form-group">
                    <label for="admin-password">Password</label>
                    <input type="password" id="admin-password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i>
                    Login
                </button>
                <div class="login-message" id="login-message"></div>
            </form>
        </div>
    </div>

    <!-- Secret Login Trigger (Hidden from normal users) -->
    <button class="secret-login-trigger" id="secret-login-trigger" title="Admin Access"></button>

    <!-- Header -->
    <header class="header" id="header">
        <div class="container">
            <nav class="nav-container">
                <a href="#home" class="logo">
                    <img src="images/mwaffs logo 2.png" alt="jud.png" style="width:60px; height:auto;">
                    MWAFFS MEDIA
                </a>
                <ul class="nav-menu" id="nav-menu">
                    <li><a href="#home" class="nav-link active">Home</a></li>
                    <li><a href="#about" class="nav-link">About</a></li>
                    <li><a href="#services" class="nav-link">Services</a></li>
                    <li><a href="#portfolio" class="nav-link">Portfolio</a></li>
                    <li><a href="#team" class="nav-link">Team</a></li>
                    <li><a href="#contact" class="nav-link">Contact</a></li>
                </ul>
                <div class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </div>
    </header>

    <!-- Admin Toggle (Hidden until login) -->
    <button class="admin-toggle" id="admin-toggle" title="Admin Panel">
        <i class="fas fa-cog"></i>
    </button>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h1>MWAFFS MEDIA</h1>
            <p class="tagline">Capturing Malawi's Stories Through Creative Excellence</p>
            <p class="subtitle">Professional Photography • Videography • Graphic Design</p>
            <div class="cta-buttons">
                <a href="#portfolio" class="btn btn-primary">
                    <i class="fas fa-play"></i>
                    View Our Work
                </a>
                <a href="#contact" class="btn btn-outline">
                    <i class="fas fa-envelope"></i>
                    Get In Touch
                </a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="section about" id="about">
        <div class="container">
            <div class="section-title fade-in">
                <h2>About MWAFFS MEDIA</h2>
                <p>Pioneering creative excellence in Malawi's media landscape</p>
            </div>
            <div class="about-grid fade-in">
                <div class="about-content">
                    <h3>Our Story</h3>
                    <p>MWAFFS MEDIA stands at the forefront of Malawi's creative industry, delivering exceptional photography, videography, and graphic design services. Founded with a vision to tell Malawi's stories through powerful visual narratives, we combine technical expertise with artistic creativity.</p>
                    <p>Our team of passionate professionals brings together years of experience, cutting-edge equipment, and an deep understanding of Malawian culture to create content that resonates both locally and internationally.</p>
                    <p>From corporate events to weddings, from brand campaigns to documentaries, we approach each project with dedication, creativity, and the highest standards of professionalism.</p>
                </div>
                <div class="stats-container">
                    <div class="stat-item">
                        <span class="number" data-count="500">0</span>
                        <span class="label">Projects Completed</span>
                    </div>
                    <div class="stat-item">
                        <span class="number" data-count="8">0</span>
                        <span class="label">Years Experience</span>
                    </div>
                    <div class="stat-item">
                        <span class="number" data-count="200">0</span>
                        <span class="label">Happy Clients</span>
                    </div>
                    <div class="stat-item">
                        <span class="number" data-count="50">0</span>
                        <span class="label">Awards Won</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="section services" id="services">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Our Services</h2>
                <p>Comprehensive media solutions tailored to your needs</p>
            </div>
            <div class="services-grid fade-in">
                <div class="service-card">
                    <i class="fas fa-camera"></i>
                    <h3>Photography</h3>
                    <p>Professional photography services including portraits, events, corporate, product photography, and more. We capture moments that matter with artistic flair and technical precision.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-video"></i>
                    <h3>Videography</h3>
                    <p>From concept to final cut, we produce compelling video content including documentaries, commercials, music videos, corporate videos, and event coverage with cinematic quality.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-paint-brush"></i>
                    <h3>Graphic Design</h3>
                    <p>Creative graphic design solutions including brand identity, marketing materials, digital graphics, print design, and visual communication that makes your brand stand out.</p>
                </div>
                <div class="service-card">
                    <i class="fas fa-bullhorn"></i>
                    <h3>Brand Consultation</h3>
                    <p>Strategic brand development and consultation services to help businesses establish strong visual identities and effective marketing strategies in the Malawian market.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Portfolio Section - CHANGED: Moved before Team -->
    <section class="section portfolio" id="portfolio">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Our Portfolio</h2>
                <p>Showcasing our finest work across all disciplines</p>
            </div>
            <div class="portfolio-filters fade-in">
                <button class="filter-btn active" data-filter="all">All Work</button>
                <button class="filter-btn" data-filter="photography">Photography</button>
                <button class="filter-btn" data-filter="videography">Videography</button>
                <button class="filter-btn" data-filter="graphic-design">Graphic Design</button>
            </div>
            <div class="portfolio-grid fade-in" id="portfolio-grid">
                <!-- Portfolio items will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Team Section - CHANGED: Moved after Portfolio -->
    <section class="section team" id="team">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Our Team</h2>
                <p>Meet the creative minds behind MWAFFS MEDIA</p>
            </div>
            <div class="team-grid fade-in" id="team-grid">
                <!-- Team members will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="section testimonials" style="background: var(--bg-light);">
        <div class="container">
            <div class="section-title fade-in">
                <h2>What Our Clients Say</h2>
                <p>Testimonials from satisfied clients across Malawi</p>
            </div>
            <div class="testimonials-carousel fade-in" id="testimonials-carousel">
                <div class="testimonial-item active">
                    <div class="testimonial-content">
                        <p>"MWAFFS MEDIA captured our wedding beautifully. Their attention to detail and professionalism exceeded our expectations. The photos and videos are absolutely stunning!"</p>
                        <div class="testimonial-author">
                            <h4>Sarah & John Banda</h4>
                            <span>Wedding Clients</span>
                        </div>
                    </div>
                </div>
                <div class="testimonial-item">
                    <div class="testimonial-content">
                        <p>"Working with MWAFFS MEDIA on our corporate campaign was a game-changer. Their creative approach and technical expertise delivered results beyond our imagination."</p>
                        <div class="testimonial-author">
                            <h4>Grace Mthunzi</h4>
                            <span>Marketing Director, ABC Corp</span>
                        </div>
                    </div>
                </div>
                <div class="testimonial-item">
                    <div class="testimonial-content">
                        <p>"The team's passion for storytelling through visuals is evident in every project. They understand Malawian culture and translate it beautifully into their work."</p>
                        <div class="testimonial-author">
                            <h4>Dr. Patrick Chirwa</h4>
                            <span>Cultural Ambassador</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="testimonial-nav">
                <button class="prev-btn" onclick="changeTestimonial(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="next-btn" onclick="changeTestimonial(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="section contact" id="contact">
        <div class="container">
            <div class="section-title fade-in">
                <h2>Get In Touch</h2>
                <p>Ready to bring your vision to life? Let's discuss your project</p>
            </div>
            <div class="contact-grid fade-in">
                <div class="contact-form">
                    <h3>Send us a Message</h3>
                    <form action="https://api.web3forms.com/submit" method="POST" id="contact-form">
                        <input type="hidden" name="access_key" value="bda6a9f0-aa53-45f8-9226-81b6fc97250f">
                        <input type="hidden" name="subject" value="New Contact Form Submission - MWAFFS MEDIA">
                        <input type="hidden" name="from_name" value="MWAFFS MEDIA Website">
                        <input type="checkbox" name="botcheck" style="display: none;">
                        
                        <div class="form-group">
                            <label for="name">Full Name *</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        <div class="form-group">
                            <label for="service">Service Needed *</label>
                            <select id="service" name="service" required>
                                <option value="">Select a Service</option>
                                <option value="photography">Photography</option>
                                <option value="videography">Videography</option>
                                <option value="graphic-design">Graphic Design</option>
                                <option value="consultation">Brand Consultation</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="message">Project Details *</label>
                            <textarea id="message" name="message" rows="5" placeholder="Tell us about your project..." required></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" id="submit-btn">
                            <i class="fas fa-paper-plane"></i>
                            Send Message
                        </button>
                        <div class="form-message" id="form-message"></div>
                    </form>
                </div>
                <div class="contact-info">
                    <h3>Contact Information</h3>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <strong>Office Address</strong>
                            <p>Blantyre, Southern Region<br>Malawi</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <strong>Phone</strong>
                            <p>+265 888 251 157</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <strong>Email</strong>
                            <p>mwaffsmedia@gmail.com</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-clock"></i>
                        <div>
                            <strong>Business Hours</strong>
                            <p>Mon - Fri: 8:00 AM - 6:00 PM<br>Sat: 9:00 AM - 4:00 PM</p>
                        </div>
                    </div>
                    <div class="social-links">
                        <a href="https://facebook.com/mwaffsmedia" target="_blank" title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://youtube.com/mwaffsmedia" target="_blank" title="YouTube">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://instagram.com/mwaffsmedia" target="_blank" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://twitter.com/mwaffsmedia" target="_blank" title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>MWAFFS MEDIA</h3>
                    <p>Premier media company in Malawi, specializing in photography, videography, and graphic design services that capture and tell your story with excellence.</p>
                </div>
                <div class="footer-section">
                    <h3>Services</h3>
                    <ul style="list-style: none;">
                        <li><a href="#services">Photography</a></li>
                        <li><a href="#services">Videography</a></li>
                        <li><a href="#services">Graphic Design</a></li>
                        <li><a href="#services">Brand Consultation</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul style="list-style: none;">
                        <li><a href="#about">About Us</a></li>
                        <li><a href="#portfolio">Portfolio</a></li>
                        <li><a href="#team">Our Team</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect With Us</h3>
                    <div class="social-links">
                        <a href="https://facebook.com/mwaffsmedia" target="_blank">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="https://youtube.com/mwaffsmedia" target="_blank">
                            <i class="fab fa-youtube"></i>
                        </a>
                        <a href="https://instagram.com/mwaffsmedia" target="_blank">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://twitter.com/mwaffsmedia" target="_blank">
                            <i class="fab fa-twitter"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 MWAFFS MEDIA. All rights reserved. | Designed with ❤️ in Malawi</p>
            </div>
        </div>
    </footer>

    <!-- Admin Panel -->
    <div class="admin-panel" id="admin-panel">
        <div class="admin-header">
            <h2>Admin Panel</h2>
            <button class="close-admin" onclick="toggleAdmin()">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <!-- Team Management -->
        <div class="admin-section">
            <h3>Team Management</h3>
            <div id="team-admin">
                <div class="form-group">
                    <label for="team-select">Select Team Member:</label>
                    <select id="team-select" onchange="loadTeamMember()">
                        <option value="">Add New Member</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="team-name">Name:</label>
                    <input type="text" id="team-name" placeholder="Full Name">
                </div>
                <div class="form-group">
                    <label for="team-position">Position:</label>
                    <input type="text" id="team-position" placeholder="Job Title">
                </div>
                <div class="form-group">
                    <label for="team-bio">Bio:</label>
                    <textarea id="team-bio" rows="3" placeholder="Brief biography"></textarea>
                </div>
                <div class="form-group">
                    <label for="team-image">Image URL:</label>
                    <input type="url" id="team-image" placeholder="https://example.com/image.jpg">
                </div>
                <div class="admin-buttons">
                    <button onclick="saveTeamMember()" class="btn btn-primary">Save</button>
                    <button onclick="deleteTeamMember()" class="btn btn-outline">Delete</button>
                </div>
            </div>
        </div>

        <!-- Portfolio Management -->
        <div class="admin-section">
            <h3>Portfolio Management</h3>
            <div id="portfolio-admin">
                <div class="form-group">
                    <label for="portfolio-select">Select Project:</label>
                    <select id="portfolio-select" onchange="loadPortfolioItem()">
                        <option value="">Add New Project</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="portfolio-title">Project Title:</label>
                    <input type="text" id="portfolio-title" placeholder="Project Name">
                </div>
                <div class="form-group">
                    <label for="portfolio-category">Category:</label>
                    <select id="portfolio-category">
                        <option value="photography">Photography</option>
                        <option value="videography">Videography</option>
                        <option value="graphic-design">Graphic Design</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="portfolio-description">Description:</label>
                    <textarea id="portfolio-description" rows="3" placeholder="Project description"></textarea>
                </div>
                <div class="form-group">
                    <label for="portfolio-media">Media URL (Image/Video):</label>
                    <input type="url" id="portfolio-media" placeholder="https://example.com/media">
                </div>
                <div class="form-group">
                    <label for="portfolio-type">Media Type:</label>
                    <select id="portfolio-type">
                        <option value="image">Image</option>
                        <option value="video">Video</option>
                        <option value="youtube">YouTube Video</option>
                    </select>
                </div>
                <div class="admin-buttons">
                    <button onclick="savePortfolioItem()" class="btn btn-primary">Save</button>
                    <button onclick="deletePortfolioItem()" class="btn btn-outline">Delete</button>
                </div>
            </div>
        </div>

        <!-- Content Management -->
        <div class="admin-section">
            <h3>Content Management</h3>
            <div class="form-group">
                <label for="company-tagline">Company Tagline:</label>
                <input type="text" id="company-tagline" placeholder="Company tagline">
            </div>
            <div class="form-group">
                <label for="company-description">About Description:</label>
                <textarea id="company-description" rows="4" placeholder="Company description"></textarea>
            </div>
            <div class="form-group">
                <label for="contact-phone">Phone:</label>
                <input type="text" id="contact-phone" placeholder="+265 123 456 789">
            </div>
            <div class="form-group">
                <label for="contact-email">Email:</label>
                <input type="email" id="contact-email" placeholder="info@mwaffsmedia.com">
            </div>
            <div class="form-group">
                <label for="contact-address">Address:</label>
                <textarea id="contact-address" rows="2" placeholder="Company address"></textarea>
            </div>
            <button onclick="saveGeneralContent()" class="btn btn-primary">Save Changes</button>
        </div>

        <!-- Logout Button -->
        <div class="admin-section">
            <button onclick="logoutAdmin()" class="btn btn-outline" style="width: 100%;">
                <i class="fas fa-sign-out-alt"></i>
                Logout
            </button>
        </div>
    </div>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" onclick="closeLightbox()">
        <span class="lightbox-close">&times;</span>
        <div class="lightbox-content" id="lightbox-content"></div>
    </div>

    <script>
        // NEW: Category slideshow functionality
        let currentSlideshow = null;
        let slideshowInterval = null;
        let currentSlideIndex = 0;
        
        // Extended portfolio data with multiple images per category
        // UPDATED: Added your landscape photography images
        let portfolioData = [
            {
                id: 1,
                title: "Wedding Photography",
                category: "photography",
                description: "Beautiful wedding photography capturing love and tradition",
                media: [
                    { type: "image", url: "https://images.unsplash.com/photo-1519741497674-611481863552?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1465495976277-4387d4b0e4a6?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1519225421980-715cb0215aed?w=500&h=400&fit=crop" }
                ]
            },
            {
                id: 2,
                title: "Portrait Photography",
                category: "photography",
                description: "Professional portrait sessions",
                media: [
                    { type: "image", url: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1507591064344-4c6ce005b128?w=500&h=400&fit=crop" }
                ]
            },
            {
                id: 3,
                title: "Landscape Photography",
                category: "photography",
                description: "Stunning Malawian landscapes",
                media: [
                    image: "Photography/Mwaffs Media .jpg"
                    image: "Photography/Mwaffs Media 1.jpg"
                    image: "Photography/Mwaffs Media 2.jpg"
                    image: "Photography/Mwaffs Media 3.jpg"
                    image: "Photography/Mwaffs Media 4.jpg"
                ]
            },
            {
                id: 4,
                title: "Corporate Video",
                category: "videography",
                description: "Dynamic corporate video showcasing company values",
                media: [
                    { type: "video", url: "https://player.vimeo.com/video/120174177" },
                    { type: "video", url: "https://player.vimeo.com/video/1084537" },
                    { type: "video", url: "https://player.vimeo.com/video/139707837" }
                ]
            },
            {
                id: 5,
                title: "Event Coverage",
                category: "videography",
                description: "Comprehensive event videography",
                media: [
                    { type: "video", url: "https://player.vimeo.com/video/76979871" },
                    { type: "video", url: "https://player.vimeo.com/video/148177969" },
                    { type: "video", url: "https://player.vimeo.com/video/22439234" }
                ]
            },
            {
                id: 6,
                title: "Logo Design",
                category: "graphic-design",
                description: "Creative logo designs for various Malawian businesses",
                media: [
                    { type: "image", url: "https://images.unsplash.com/photo-1561070791-2526d30994b5?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1634942537034-2531766767d1?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1634942536946-13583e5c04f0?w=500&h=400&fit=crop" }
                ]
            },
            {
                id: 7,
                title: "Brand Identity",
                category: "graphic-design",
                description: "Complete brand identity packages",
                media: [
                    { type: "image", url: "https://images.unsplash.com/photo-1558655146-364adaf3f518?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1601933470096-0e34634ffcde?w=500&h=400&fit=crop" },
                    { type: "image", url: "https://images.unsplash.com/photo-1565689228866-1d5b1300d3c8?w=500&h=400&fit=crop" }
                ]
            }
        ];

        // Rest of your existing data and functions remain the same
        // Admin Security Configuration
        const ADMIN_CONFIG = {
            username: "mwaffsadmin", // Change this to your preferred username
            password: "MalawiMedia2024!", // Change this to your preferred password
            sessionTimeout: 60 * 60 * 1000, // 1 hour in milliseconds
            secretTrigger: "mwaffs" // Secret keyword to trigger login
        };

        // Data Storage
        let teamData = [
            {
                id: 1,
                name: "Precious Mataka",
                position: "CEO",
                bio: "As a Co-Founder of MWAFFS Media, Precious Mataka leads with creativity, vision, and innovation. He is a dynamic leader with a passion for developing fresh ideas, guiding teams toward success, and delivering impactful media solutions that inspire and connect communities.",
                image: "images/Precious Mataka CEO.png"
            },
            {
                id: 2,
                name: "Praise Bwanali",
                position: "CEO",
                bio: "Creative director and co-founder with extensive experience in photography and videography. Committed to capturing authentic Malawian stories.",
                image: "images/Praise Bwanali.jpg"
            },
            {
                id: 3,
                name: "Grant Mliule",
                position: "Managing Director",
                bio: "Strategic leader overseeing company operations and business development. Expert in project management and client relationships.",
                image: "images/Grant Mliule.jpg"
            },
            {
                id: 4,
                name: "Fatsani Munkhondya",
                position: "Secretary",
                bio: "As Secretary of MWAFFS Media, [Name] ensures effective communication, organization, and record-keeping within the team. With strong attention to detail and commitment to efficiency, [he/she] plays a vital role in supporting leadership and keeping operations running smoothly.",
                image: "images/mwaffs.png"
            },
            {
                id: 5,
                name: "Charles Luwe",
                position: "Marketing Director",
                bio: "Charles Luwe, the Marketing Director of MWAFFS Media, leads with creativity and strategy in promoting the company's brand and services. With a passion for innovation and audience engagement, [he/she] develops impactful campaigns that connect MWAFFS Media to clients and communities.",
                image: "images/mwaffs.png"
            },
            {
                id: 6,
                name: "Alexander Makuluni",
                position: "Deputy Marketing Director",
                bio: "As the Deputy Marketing Director, Alexander Makuluni supports the marketing team with fresh ideas and creative initiatives. Dedicated to growth and visibility, he works closely with the Marketing Director to expand MWAFFS Media's reach and strengthen its brand presence.",
                image: "images/mwaffs.png"
            },
            {
                id: 7,
                name: "Watson S. Banda ",
                position: "Chief Whipper",
                bio: "As Chief Whipper, Watson S. Banda energizes and motivates the MWAFFS Media team, fostering unity and collaboration across projects. Known for discipline and team coordination, [he/she] ensures that goals are met on time and that every member contributes to the company's success.",
                image: "images/Watson Silvestar Banda.jpeg"
            }
        ];

        let contentData = {
            tagline: "Capturing Malawi's Stories Through Creative Excellence",
            description: "MWAFFS MEDIA stands at the forefront of Malawi's creative industry, delivering exceptional photography, videography, and graphic design services.",
            phone: "+265 123 456 789",
            email: "info@mwaffsmedia.com",
            address: "Blantyre, Southern Region\nMalawi"
        };

        // Initialize the website
        document.addEventListener('DOMContentLoaded', function() {
            // Hide loader after 2 seconds
            setTimeout(() => {
                document.getElementById('loader').classList.add('hidden');
            }, 2000);

            // Initialize all components
            initializeNavigation();
            initializeAnimations();
            initializePortfolio();
            initializeTeam();
            initializeTestimonials();
            initializeContactForm();
            initializeAdminSecurity();
            initializeCounters();
            initializeSlideshow(); // NEW: Initialize slideshow functionality

            // Check if already logged in
            checkAdminSession();
        });

        // NEW: Initialize slideshow functionality
        function initializeSlideshow() {
            const closeBtn = document.getElementById('slideshow-close');
            const prevBtn = document.getElementById('slideshow-prev');
            const nextBtn = document.getElementById('slideshow-next');
            const slideshow = document.getElementById('category-slideshow');

            closeBtn.addEventListener('click', closeSlideshow);
            prevBtn.addEventListener('click', () => navigateSlideshow(-1));
            nextBtn.addEventListener('click', () => navigateSlideshow(1));

            // Close slideshow when clicking outside content
            slideshow.addEventListener('click', (e) => {
                if (e.target === slideshow) {
                    closeSlideshow();
                }
            });

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (slideshow.classList.contains('active')) {
                    if (e.key === 'Escape') closeSlideshow();
                    if (e.key === 'ArrowLeft') navigateSlideshow(-1);
                    if (e.key === 'ArrowRight') navigateSlideshow(1);
                }
            });
        }

        // NEW: Open category slideshow
        function openCategorySlideshow(category) {
            const categoryItems = portfolioData.filter(item => item.category === category);
            if (categoryItems.length === 0) return;

            // Flatten all media from category items
            const allMedia = [];
            categoryItems.forEach(item => {
                allMedia.push(...item.media);
            });

            if (allMedia.length === 0) return;

            currentSlideshow = allMedia;
            currentSlideIndex = 0;

            // Create slideshow content
            const container = document.getElementById('slideshow-container');
            const dotsContainer = document.getElementById('slideshow-dots');
            
            container.innerHTML = '';
            dotsContainer.innerHTML = '';

            allMedia.forEach((media, index) => {
                const slide = document.createElement('div');
                slide.className = `slideshow-slide ${index === 0 ? 'active' : ''}`;
                
                if (media.type === 'image') {
                    slide.innerHTML = `<img src="${media.url}" alt="Slideshow image ${index + 1}">`;
                } else if (media.type === 'video') {
                    slide.innerHTML = `<iframe src="${media.url}" frameborder="0" allowfullscreen></iframe>`;
                } else if (media.type === 'youtube') {
                    slide.innerHTML = `<iframe src="${media.url}" frameborder="0" allowfullscreen></iframe>`;
                }
                
                container.appendChild(slide);

                // Create dot
                const dot = document.createElement('span');
                dot.className = `slideshow-dot ${index === 0 ? 'active' : ''}`;
                dot.addEventListener('click', () => goToSlide(index));
                dotsContainer.appendChild(dot);
            });

            // Show slideshow
            document.getElementById('category-slideshow').classList.add('active');
            document.body.style.overflow = 'hidden';

            // Start auto-slide
            startAutoSlide();
        }

        // NEW: Navigate slideshow
        function navigateSlideshow(direction) {
            if (!currentSlideshow) return;
            
            const slides = document.querySelectorAll('.slideshow-slide');
            const dots = document.querySelectorAll('.slideshow-dot');
            
            slides[currentSlideIndex].classList.remove('active');
            dots[currentSlideIndex].classList.remove('active');
            
            currentSlideIndex = (currentSlideIndex + direction + currentSlideshow.length) % currentSlideshow.length;
            
            slides[currentSlideIndex].classList.add('active');
            dots[currentSlideIndex].classList.add('active');
            
            // Reset auto-slide timer
            resetAutoSlide();
        }

        // NEW: Go to specific slide
        function goToSlide(index) {
            if (!currentSlideshow || index < 0 || index >= currentSlideshow.length) return;
            
            const slides = document.querySelectorAll('.slideshow-slide');
            const dots = document.querySelectorAll('.slideshow-dot');
            
            slides[currentSlideIndex].classList.remove('active');
            dots[currentSlideIndex].classList.remove('active');
            
            currentSlideIndex = index;
            
            slides[currentSlideIndex].classList.add('active');
            dots[currentSlideIndex].classList.add('active');
            
            // Reset auto-slide timer
            resetAutoSlide();
        }

        // NEW: Start auto-slide
        function startAutoSlide() {
            if (slideshowInterval) clearInterval(slideshowInterval);
            slideshowInterval = setInterval(() => {
                navigateSlideshow(1);
            }, 2000); // Change slide every 2 seconds
        }

        // NEW: Reset auto-slide timer
        function resetAutoSlide() {
            if (slideshowInterval) {
                clearInterval(slideshowInterval);
                startAutoSlide();
            }
        }

        // NEW: Close slideshow
        function closeSlideshow() {
            document.getElementById('category-slideshow').classList.remove('active');
            document.body.style.overflow = 'auto';
            
            if (slideshowInterval) {
                clearInterval(slideshowInterval);
                slideshowInterval = null;
            }
            
            currentSlideshow = null;
            currentSlideIndex = 0;
        }

        // Admin Security Functions
        function initializeAdminSecurity() {
            // Secret trigger for login
            let secretInput = '';
            document.addEventListener('keydown', (e) => {
                secretInput += e.key.toLowerCase();
                if (secretInput.includes(ADMIN_CONFIG.secretTrigger)) {
                    showAdminLogin();
                    secretInput = '';
                }
                
                // Reset if input gets too long
                if (secretInput.length > 20) {
                    secretInput = '';
                }
            });

            // Admin login form
            document.getElementById('admin-login-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const username = document.getElementById('admin-username').value;
                const password = document.getElementById('admin-password').value;
                
                if (username === ADMIN_CONFIG.username && password === ADMIN_CONFIG.password) {
                    loginAdmin();
                } else {
                    showLoginMessage('Invalid credentials. Please try again.', 'error');
                }
            });

            // Secret login trigger click
            document.getElementById('secret-login-trigger').addEventListener('click', () => {
                showAdminLogin();
            });
        }

        function showAdminLogin() {
            document.getElementById('admin-login-modal').classList.add('active');
            document.getElementById('admin-username').focus();
        }

        function hideAdminLogin() {
            document.getElementById('admin-login-modal').classList.remove('active');
            document.getElementById('admin-login-form').reset();
            document.getElementById('login-message').style.display = 'none';
        }

        function showLoginMessage(message, type) {
            const messageDiv = document.getElementById('login-message');
            messageDiv.textContent = message;
            messageDiv.className = `login-message ${type}`;
            messageDiv.style.display = 'block';
        }

        function loginAdmin() {
            // Set login session
            const sessionData = {
                loggedIn: true,
                loginTime: Date.now()
            };
            localStorage.setItem('mwaffs_admin_session', JSON.stringify(sessionData));
            
            // Show admin toggle
            document.getElementById('admin-toggle').classList.add('visible');
            
            // Hide login modal
            hideAdminLogin();
            
            // Initialize admin panel
            initializeAdmin();
            
            // Set session timeout
            setTimeout(checkAdminSession, ADMIN_CONFIG.sessionTimeout);
        }

        function logoutAdmin() {
            // Clear session
            localStorage.removeItem('mwaffs_admin_session');
            
            // Hide admin panel and toggle
            document.getElementById('admin-panel').classList.remove('active');
            document.getElementById('admin-toggle').classList.remove('visible');
            
            // Show success message
            alert('Successfully logged out from admin panel.');
        }

        function checkAdminSession() {
            const sessionData = localStorage.getItem('mwaffs_admin_session');
            
            if (sessionData) {
                const session = JSON.parse(sessionData);
                const currentTime = Date.now();
                
                // Check if session is still valid
                if (session.loggedIn && (currentTime - session.loginTime) < ADMIN_CONFIG.sessionTimeout) {
                    // Session is valid
                    document.getElementById('admin-toggle').classList.add('visible');
                    initializeAdmin();
                    
                    // Update session time
                    session.loginTime = currentTime;
                    localStorage.setItem('mwaffs_admin_session', JSON.stringify(session));
                } else {
                    // Session expired
                    logoutAdmin();
                }
            }
        }

        // Navigation functionality
        function initializeNavigation() {
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.getElementById('nav-menu');
            const navLinks = document.querySelectorAll('.nav-link');
            const header = document.getElementById('header');

            // Mobile menu toggle
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            // Smooth scrolling for navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    const targetSection = document.getElementById(targetId);
                    
                    if (targetSection) {
                        targetSection.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }

                    // Close mobile menu
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');

                    // Update active link
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });

            // Header scroll effect
            window.addEventListener('scroll', () => {
                if (window.scrollY > 100) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }

                // Update active navigation based on scroll position
                updateActiveNavigation();
            });
        }

        function updateActiveNavigation() {
            const sections = document.querySelectorAll('.section, .hero');
            const navLinks = document.querySelectorAll('.nav-link');
            let current = 'home';

            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                const sectionHeight = section.offsetHeight;
                if (window.scrollY >= sectionTop && window.scrollY < sectionTop + sectionHeight) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        }

        // Animations
        function initializeAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });
        }

        // Counter animation
        function initializeCounters() {
            const counters = document.querySelectorAll('.number[data-count]');
            const observerOptions = {
                threshold: 0.5
            };

            const counterObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounter(entry.target);
                        counterObserver.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            counters.forEach(counter => {
                counterObserver.observe(counter);
            });
        }

        function animateCounter(element) {
            const target = parseInt(element.getAttribute('data-count'));
            let current = 0;
            const increment = target / 50;
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    element.textContent = target + '+';
                    clearInterval(timer);
                } else {
                    element.textContent = Math.floor(current);
                }
            }, 40);
        }

        // Portfolio functionality - UPDATED: Added category slideshow
        function initializePortfolio() {
            renderPortfolio();
            
            // Filter buttons
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    filterButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    const filter = btn.getAttribute('data-filter');
                    filterPortfolio(filter);
                });
            });
        }

        function renderPortfolio() {
            const grid = document.getElementById('portfolio-grid');
            grid.innerHTML = '';

            portfolioData.forEach(item => {
                const portfolioItem = document.createElement('div');
                portfolioItem.className = `portfolio-item ${item.category}`;
                portfolioItem.setAttribute('data-category', item.category);

                // Use the first media item for the thumbnail
                const thumbnail = item.media[0];
                let mediaContent = '';
                if (thumbnail.type === 'youtube') {
                    mediaContent = `<iframe src="${thumbnail.url}" frameborder="0" allowfullscreen></iframe>`;
                } else if (thumbnail.type === 'video') {
                    mediaContent = `<video controls><source src="${thumbnail.url}" type="video/mp4"></video>`;
                } else {
                    mediaContent = `<img src="${thumbnail.url}" alt="${item.title}" loading="lazy">`;
                }

                portfolioItem.innerHTML = `
                    <div class="item-image">
                        ${thumbnail.type === 'image' ? `<img src="${thumbnail.url}" alt="${item.title}" loading="lazy">` : ''}
                        <div class="item-overlay">
                            <button onclick="openLightbox('${thumbnail.url}', '${thumbnail.type}')" class="btn btn-primary">
                                <i class="fas fa-expand"></i>
                                View
                            </button>
                        </div>
                    </div>
                    <div class="item-content">
                        <h3>${item.title}</h3>
                        <p class="category">${item.category.replace('-', ' ').toUpperCase()}</p>
                        <p>${item.description}</p>
                    </div>
                `;

                grid.appendChild(portfolioItem);
            });

            // Add category buttons for slideshow
            const filtersContainer = document.querySelector('.portfolio-filters');
            const categoryButtons = document.querySelectorAll('.filter-btn[data-filter]');
            
            categoryButtons.forEach(btn => {
                const category = btn.getAttribute('data-filter');
                if (category !== 'all') {
                    // Add click event to open slideshow for this category
                    btn.addEventListener('click', () => {
                        // Small delay to ensure filter is applied first
                        setTimeout(() => {
                            openCategorySlideshow(category);
                        }, 100);
                    });
                }
            });
        }

        function filterPortfolio(category) {
            const items = document.querySelectorAll('.portfolio-item');
            
            items.forEach(item => {
                if (category === 'all' || item.getAttribute('data-category') === category) {
                    item.style.display = 'block';
                    setTimeout(() => {
                        item.style.opacity = '1';
                        item.style.transform = 'scale(1)';
                    }, 100);
                } else {
                    item.style.opacity = '0';
                    item.style.transform = 'scale(0.8)';
                    setTimeout(() => {
                        item.style.display = 'none';
                    }, 300);
                }
            });
        }

        // Lightbox functionality
        function openLightbox(media, type) {
            const lightbox = document.getElementById('lightbox');
            const content = document.getElementById('lightbox-content');
            
            let mediaElement = '';
            if (type === 'youtube') {
                mediaElement = `<iframe src="${media}" width="80%" height="80%" frameborder="0" allowfullscreen></iframe>`;
            } else if (type === 'video') {
                mediaElement = `<video controls width="80%" height="80%"><source src="${media}" type="video/mp4"></video>`;
            } else {
                mediaElement = `<img src="${media}" alt="Portfolio item">`;
            }
            
            content.innerHTML = mediaElement;
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            const lightbox = document.getElementById('lightbox');
            lightbox.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Team functionality
        function initializeTeam() {
            renderTeam();
        }

        function renderTeam() {
            const grid = document.getElementById('team-grid');
            grid.innerHTML = '';

            teamData.forEach(member => {
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card';
                teamCard.innerHTML = `
                    <div class="card-image">
                        <img src="${member.image}" alt="${member.name}" loading="lazy">
                    </div>
                    <div class="card-content">
                        <h3>${member.name}</h3>
                        <p class="position">${member.position}</p>
                        <p class="bio">${member.bio}</p>
                    </div>
                `;
                grid.appendChild(teamCard);
            });
        }

        // Testimonials functionality
        function initializeTestimonials() {
            let currentTestimonial = 0;
            setInterval(() => {
                changeTestimonial(1);
            }, 5000);
        }

        function changeTestimonial(direction) {
            const testimonials = document.querySelectorAll('.testimonial-item');
            const current = document.querySelector('.testimonial-item.active');
            let currentIndex = Array.from(testimonials).indexOf(current);

            current.classList.remove('active');
            
            currentIndex += direction;
            if (currentIndex >= testimonials.length) currentIndex = 0;
            if (currentIndex < 0) currentIndex = testimonials.length - 1;
            
            testimonials[currentIndex].classList.add('active');
        }

        // Contact form with Web3Forms
        function initializeContactForm() {
            const form = document.getElementById('contact-form');
            const submitBtn = document.getElementById('submit-btn');
            const messageDiv = document.getElementById('form-message');
            
            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // Get form data
                const formData = new FormData(form);
                const data = Object.fromEntries(formData);
                
                // Simple validation
                if (!data.name || !data.email || !data.message) {
                    showMessage('Please fill in all required fields.', 'error');
                    return;
                }
                
                // Show loading state
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
                
                try {
                    // Using Web3Forms for form submission
                    const response = await fetch(form.action, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    const result = await response.json();
                    
                    if (response.ok && result.success) {
                        // Success
                        showMessage('Thank you for your message! We\'ll get back to you soon.', 'success');
                        form.reset();
                    } else {
                        // Error
                        throw new Error(result.message || 'Form submission failed');
                    }
                } catch (error) {
                    // Error handling
                    console.error('Failed to send message:', error);
                    showMessage('Sorry, there was an error sending your message. Please try again later or contact us directly at mwaffsmedia@gmail.com.', 'error');
                } finally {
                    // Reset button state
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
                }
            });
        }

        // Show form message
        function showMessage(message, type) {
            const messageDiv = document.getElementById('form-message');
            messageDiv.textContent = message;
            messageDiv.className = `form-message ${type}`;
            messageDiv.style.display = 'block';
            
            // Hide message after 5 seconds
            setTimeout(() => {
                messageDiv.style.display = 'none';
            }, 5000);
        }

        // Admin panel functionality
        function initializeAdmin() {
            loadAdminData();
            
            document.getElementById('admin-toggle').addEventListener('click', toggleAdmin);
        }

        function toggleAdmin() {
            const panel = document.getElementById('admin-panel');
            panel.classList.toggle('active');
        }

        function loadAdminData() {
            // Load team data into admin
            const teamSelect = document.getElementById('team-select');
            teamSelect.innerHTML = '<option value="">Add New Member</option>';
            teamData.forEach(member => {
                const option = document.createElement('option');
                option.value = member.id;
                option.textContent = member.name;
                teamSelect.appendChild(option);
            });

            // Load portfolio data into admin
            const portfolioSelect = document.getElementById('portfolio-select');
            portfolioSelect.innerHTML = '<option value="">Add New Project</option>';
            portfolioData.forEach(item => {
                const option = document.createElement('option');
                option.value = item.id;
                option.textContent = item.title;
                portfolioSelect.appendChild(option);
            });

            // Load content data
            document.getElementById('company-tagline').value = contentData.tagline;
            document.getElementById('company-description').value = contentData.description;
            document.getElementById('contact-phone').value = contentData.phone;
            document.getElementById('contact-email').value = contentData.email;
            document.getElementById('contact-address').value = contentData.address;
        }

        // Team management functions
        function loadTeamMember() {
            const select = document.getElementById('team-select');
            const memberId = parseInt(select.value);
            
            if (!memberId) {
                // Clear form for new member
                document.getElementById('team-name').value = '';
                document.getElementById('team-position').value = '';
                document.getElementById('team-bio').value = '';
                document.getElementById('team-image').value = '';
                return;
            }
            
            const member = teamData.find(m => m.id === memberId);
            if (member) {
                document.getElementById('team-name').value = member.name;
                document.getElementById('team-position').value = member.position;
                document.getElementById('team-bio').value = member.bio;
                document.getElementById('team-image').value = member.image;
            }
        }

        function saveTeamMember() {
            const select = document.getElementById('team-select');
            const memberId = parseInt(select.value);
            
            const memberData = {
                name: document.getElementById('team-name').value,
                position: document.getElementById('team-position').value,
                bio: document.getElementById('team-bio').value,
                image: document.getElementById('team-image').value || 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=300&h=300&fit=crop&crop=face'
            };

            if (!memberData.name || !memberData.position) {
                alert('Please fill in name and position.');
                return;
            }

            if (memberId) {
                // Update existing member
                const index = teamData.findIndex(m => m.id === memberId);
                if (index !== -1) {
                    teamData[index] = { ...teamData[index], ...memberData };
                }
            } else {
                // Add new member
                const newId = Math.max(...teamData.map(m => m.id)) + 1;
                teamData.push({ id: newId, ...memberData });
            }

            renderTeam();
            loadAdminData();
            alert('Team member saved successfully!');
        }

        function deleteTeamMember() {
            const select = document.getElementById('team-select');
            const memberId = parseInt(select.value);
            
            if (!memberId) {
                alert('Please select a team member to delete.');
                return;
            }

            if (confirm('Are you sure you want to delete this team member?')) {
                teamData = teamData.filter(m => m.id !== memberId);
                renderTeam();
                loadAdminData();
                loadTeamMember(); // Clear form
                alert('Team member deleted successfully!');
            }
        }

        // Portfolio management functions - UPDATED: For new portfolio data structure
        function loadPortfolioItem() {
            const select = document.getElementById('portfolio-select');
            const itemId = parseInt(select.value);
            
            if (!itemId) {
                // Clear form for new item
                document.getElementById('portfolio-title').value = '';
                document.getElementById('portfolio-category').value = 'photography';
                document.getElementById('portfolio-description').value = '';
                document.getElementById('portfolio-media').value = '';
                document.getElementById('portfolio-type').value = 'image';
                return;
            }
            
            const item = portfolioData.find(p => p.id === itemId);
            if (item) {
                document.getElementById('portfolio-title').value = item.title;
                document.getElementById('portfolio-category').value = item.category;
                document.getElementById('portfolio-description').value = item.description;
                // For simplicity, we'll just use the first media item in admin
                document.getElementById('portfolio-media').value = item.media[0].url;
                document.getElementById('portfolio-type').value = item.media[0].type;
            }
        }

        function savePortfolioItem() {
            const select = document.getElementById('portfolio-select');
            const itemId = parseInt(select.value);
            
            const itemData = {
                title: document.getElementById('portfolio-title').value,
                category: document.getElementById('portfolio-category').value,
                description: document.getElementById('portfolio-description').value,
                media: [
                    {
                        url: document.getElementById('portfolio-media').value,
                        type: document.getElementById('portfolio-type').value
                    }
                ]
            };

            if (!itemData.title || !itemData.media[0].url) {
                alert('Please fill in title and media URL.');
                return;
            }

            if (itemId) {
                // Update existing item
                const index = portfolioData.findIndex(p => p.id === itemId);
                if (index !== -1) {
                    portfolioData[index] = { ...portfolioData[index], ...itemData };
                }
            } else {
                // Add new item
                const newId = Math.max(...portfolioData.map(p => p.id)) + 1;
                portfolioData.push({ id: newId, ...itemData });
            }

            renderPortfolio();
            loadAdminData();
            alert('Portfolio item saved successfully!');
        }

        function deletePortfolioItem() {
            const select = document.getElementById('portfolio-select');
            const itemId = parseInt(select.value);
            
            if (!itemId) {
                alert('Please select a portfolio item to delete.');
                return;
            }

            if (confirm('Are you sure you want to delete this portfolio item?')) {
                portfolioData = portfolioData.filter(p => p.id !== itemId);
                renderPortfolio();
                loadAdminData();
                loadPortfolioItem(); // Clear form
                alert('Portfolio item deleted successfully!');
            }
        }

        // Content management functions
        function saveGeneralContent() {
            contentData.tagline = document.getElementById('company-tagline').value;
            contentData.description = document.getElementById('company-description').value;
            contentData.phone = document.getElementById('contact-phone').value;
            contentData.email = document.getElementById('contact-email').value;
            contentData.address = document.getElementById('contact-address').value;

            // Update content on the page
            updatePageContent();
            alert('Content updated successfully!');
        }

        function updatePageContent() {
            // Update tagline in hero section
            const taglineElement = document.querySelector('.hero-content .tagline');
            if (taglineElement) {
                taglineElement.textContent = contentData.tagline;
            }

            // Update contact information
            const contactItems = document.querySelectorAll('.contact-item');
            contactItems.forEach(item => {
                const icon = item.querySelector('i');
                if (icon && icon.classList.contains('fa-phone')) {
                    item.querySelector('p').textContent = contentData.phone;
                } else if (icon && icon.classList.contains('fa-envelope')) {
                    item.querySelector('p').textContent = contentData.email;
                } else if (icon && icon.classList.contains('fa-map-marker-alt')) {
                    item.querySelector('p').innerHTML = contentData.address.replace('\n', '<br>');
                }
            });
        }

        // Utility functions
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Performance optimization
        window.addEventListener('scroll', debounce(() => {
            updateActiveNavigation();
        }, 10));

        // Add loading states for better UX
        function showLoading(element, text) {
            element.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ' + text;
            element.disabled = true;
        }

        function hideLoading(element, originalText) {
            element.innerHTML = originalText;
            element.disabled = false;
        }

        // Error handling
        window.addEventListener('error', (e) => {
            console.error('An error occurred:', e.error);
        });

        // Add CSS for testimonial carousel
        const additionalCSS = `
            .testimonials-carousel {
                position: relative;
                max-width: 800px;
                margin: 0 auto;
                padding: 2rem;
            }

            .testimonial-item {
                display: none;
                text-align: center;
                opacity: 0;
                transition: opacity 0.5s ease;
            }

            .testimonial-item.active {
                display: block;
                opacity: 1;
            }

            .testimonial-content {
                background: white;
                padding: 3rem 2rem;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                position: relative;
            }

            .testimonial-content::before {
                content: '"';
                font-size: 4rem;
                color: var(--primary-color);
                position: absolute;
                top: -10px;
                left: 20px;
                font-family: serif;
            }

            .testimonial-content p {
                font-size: 1.2rem;
                font-style: italic;
                margin-bottom: 2rem;
                line-height: 1.6;
            }

            .testimonial-author h4 {
                color: var(--primary-color);
                margin-bottom: 0.5rem;
                font-size: 1.1rem;
            }

            .testimonial-author span {
                opacity: 0.7;
                font-size: 0.9rem;
            }

            .testimonial-nav {
                display: flex;
                justify-content: center;
                gap: 1rem;
                margin-top: 2rem;
            }

            .testimonial-nav button {
                width: 50px;
                height: 50px;
                border: 2px solid var(--primary-color);
                background: transparent;
                color: var(--primary-color);
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .testimonial-nav button:hover {
                background: var(--primary-color);
                color: white;
                transform: scale(1.1);
            }

            .admin-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 2rem;
                padding-bottom: 1rem;
                border-bottom: 2px solid var(--primary-color);
            }

            .admin-header h2 {
                color: var(--primary-color);
                margin: 0;
            }

            .close-admin {
                background: none;
                border: none;
                font-size: 1.5rem;
                cursor: pointer;
                color: var(--text-dark);
                padding: 5px;
                border-radius: 50%;
                transition: all 0.3s ease;
            }

            .close-admin:hover {
                background: var(--primary-color);
                color: white;
            }

            .admin-buttons {
                display: flex;
                gap: 1rem;
                margin-top: 1rem;
            }

            .admin-buttons .btn {
                flex: 1;
                justify-content: center;
            }

            .form-group select {
                width: 100%;
                padding: 12px;
                border: 2px solid #e0e0e0;
                border-radius: 8px;
                transition: border-color 0.3s ease;
                background: white;
            }

            .form-group select:focus {
                outline: none;
                border-color: var(--primary-color);
            }

            @media (max-width: 768px) {
                .testimonial-content {
                    padding: 2rem 1rem;
                }

                .testimonial-content p {
                    font-size: 1rem;
                }

                .admin-buttons {
                    flex-direction: column;
                }
            }
        `;

        // Inject additional CSS
        const styleSheet = document.createElement('style');
        styleSheet.textContent = additionalCSS;
        document.head.appendChild(styleSheet);

        // Add smooth scrolling behavior for better UX
        document.documentElement.style.scrollBehavior = 'smooth';

        // Preload critical images for better performance
        function preloadImages() {
            const imageUrls = [
                ...teamData.map(member => member.image),
                ...portfolioData.flatMap(item => 
                    item.media.filter(media => media.type === 'image').map(media => media.url)
                )
            ];

            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
            });
        }

        // Initialize preloading
        setTimeout(preloadImages, 1000);

        // Add intersection observer for better performance
        function setupLazyLoading() {
            const images = document.querySelectorAll('img[loading="lazy"]');
            
            if ('IntersectionObserver' in window) {
                const imageObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src || img.src;
                            img.classList.remove('lazy');
                            imageObserver.unobserve(img);
                        }
                    });
                });

                images.forEach(img => imageObserver.observe(img));
            }
        }

        // Add accessibility improvements
        function setupAccessibility() {
            // Add keyboard navigation for portfolio filters
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                btn.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        btn.click();
                    }
                });
            });

            // Add ARIA labels
            document.querySelector('.hamburger').setAttribute('aria-label', 'Toggle mobile menu');
            document.querySelector('.admin-toggle').setAttribute('aria-label', 'Toggle admin panel');
        }

        // Initialize accessibility features
        setTimeout(setupAccessibility, 500);
        
        // Add service worker for offline functionality (optional)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Service worker registration would go here
                // This is just a placeholder for future implementation
                console.log('Service Worker ready for implementation');
            });
        }

        // Add print styles
        const printCSS = `
            @media print {
                .header, .admin-panel, .admin-toggle, .lightbox {
                    display: none !important;
                }
                
                .hero {
                    height: auto;
                    padding: 2rem 0;
                    background: white;
                    color: black;
                }
                
                .section {
                    page-break-inside: avoid;
                    padding: 1rem 0;
                }
                
                .team-card, .service-card, .portfolio-item {
                    page-break-inside: avoid;
                    box-shadow: none;
                    border: 1px solid #ddd;
                }
            }
        `;

        const printStyleSheet = document.createElement('style');
        printStyleSheet.textContent = printCSS;
        printStyleSheet.media = 'print';
        document.head.appendChild(printStyleSheet);
    </script>
</body>
</html>


